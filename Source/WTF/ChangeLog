2021-03-24  Russell Epstein  <repstein@apple.com>

        Cherry-pick r275003. rdar://problem/75819285

    WTF::setPermissionsOfConfigPage() should allow its VM_FLAGS_PERMANENT workaround unconditionally.
    https://bugs.webkit.org/show_bug.cgi?id=223725
    rdar://75813316
    
    Reviewed by Saam Barati.
    
    If the OS does not support the flag, then we should not require it.
    
    * wtf/WTFConfig.cpp:
    (WTF::setPermissionsOfConfigPage):
    
    
    
    git-svn-id: https://svn.webkit.org/repository/webkit/trunk@275003 268f45cc-cd09-0410-ab3c-d52691b4dbfc

    2021-03-24  Mark Lam  <mark.lam@apple.com>

            WTF::setPermissionsOfConfigPage() should allow its VM_FLAGS_PERMANENT workaround unconditionally.
            https://bugs.webkit.org/show_bug.cgi?id=223725
            rdar://75813316

            Reviewed by Saam Barati.

            If the OS does not support the flag, then we should not require it.

            * wtf/WTFConfig.cpp:
            (WTF::setPermissionsOfConfigPage):

2021-03-24  Russell Epstein  <repstein@apple.com>

        Cherry-pick r274898. rdar://problem/75819592

    Don't require VM_FLAGS_PERMANENT on the simulator builds
    https://bugs.webkit.org/show_bug.cgi?id=223649
    <rdar://problem/75747788>
    
    Reviewed by Alexey Proskuryakov.
    
    Since VM_FLAGS_PERMANENT must be supported by the kernel, let's make
    it so that the vm_map that passes this flag in can fail when running
    on the simulator. This is to support the use case of running a newer
    simulator on an older OS. When the call to vm_map fails when running
    on the simulator, we try again without the VM_FLAGS_PERMANENT flag.
    
    * wtf/WTFConfig.cpp:
    (WTF::setPermissionsOfConfigPage):
    
    
    git-svn-id: https://svn.webkit.org/repository/webkit/trunk@274898 268f45cc-cd09-0410-ab3c-d52691b4dbfc

    2021-03-23  Saam Barati  <sbarati@apple.com>

            Don't require VM_FLAGS_PERMANENT on the simulator builds
            https://bugs.webkit.org/show_bug.cgi?id=223649
            <rdar://problem/75747788>

            Reviewed by Alexey Proskuryakov.

            Since VM_FLAGS_PERMANENT must be supported by the kernel, let's make
            it so that the vm_map that passes this flag in can fail when running
            on the simulator. This is to support the use case of running a newer
            simulator on an older OS. When the call to vm_map fails when running
            on the simulator, we try again without the VM_FLAGS_PERMANENT flag.

            * wtf/WTFConfig.cpp:
            (WTF::setPermissionsOfConfigPage):

2021-03-22  Devin Rousso  <drousso@apple.com>

        Remove unused JS and CSS files of media controls
        https://bugs.webkit.org/show_bug.cgi?id=214955
        <rdar://problem/66604040>

        Reviewed by Eric Carlson.

        Cocoa platforms are already using modern media controls so there's no reason to keep the old
        media controls resources/logic around any longer. It just wastes space.

        The non-iOS Apple controls must be kept though as they are still used on Windows.

        * wtf/PlatformEnable.h:
        * wtf/PlatformEnableCocoa.h:
        * Scripts/Preferences/WebPreferences.yaml:
        Replace `ModernMediaControlsEnabled` setting with `ENABLE_MODERN_MEDIA_CONTROLS` build flag.

2021-03-22  Rob Buis  <rbuis@igalia.com>

        [css-contain] Parse CSS contain property
        https://bugs.webkit.org/show_bug.cgi?id=223252

        Reviewed by Darin Adler.

        Add experimental feature flag.

        * Scripts/Preferences/WebPreferencesExperimental.yaml:

2021-03-22  Ross Kirsling  <ross.kirsling@sony.com>

        Unreviewed, fix Mac and non-unified JSCOnly builds
        https://bugs.webkit.org/show_bug.cgi?id=223546

        * wtf/PlatformJSCOnly.cmake:
        Add missing file for JSCOnly build on Mac.

2021-03-19  Darin Adler  <darin@apple.com>

        [Cocoa] Make it possible to release a WKWebView on a non-main thread without a crash due to WKScriptMessage race
        https://bugs.webkit.org/show_bug.cgi?id=222336

        Reviewed by Chris Dumez.

        * wtf/spi/cocoa/objcSPI.h: Removed unnecessary #if so functions are correctly compiled for
        non-Objective-C source files. Added include of <objc/objc.h> so that "id" is defined.

2021-03-19  Sam Weinig  <weinig@apple.com>

        Add PropertyName parameter to custom setters to allow shared implementations to do late name lookup
        https://bugs.webkit.org/show_bug.cgi?id=223413

        Reviewed by Alexey Shvayka.

        * wtf/PlatformCallingConventions.h:
        Update JSC_DECLARE_CUSTOM_SETTER to account for the new PropertyName parameter.

== Rolled over to ChangeLog-2021-03-18 ==
